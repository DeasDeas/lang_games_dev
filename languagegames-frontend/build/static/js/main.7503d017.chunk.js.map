{"version":3,"sources":["components/Form/Form.module.css","components/MainMenu/MainMenu.module.css","components/Header/UserPanel/UserPanel.module.css","components/Header/Header.module.css","components/Frame/Frame.module.css","components/MainMenu/MenuItem/MenuItem.module.css","components/Panel/Panel.module.css","components/WordCard/WordCard.module.css","features/auth/authSlice.js","components/Header/UserPanel/UserWindow/UserWindow.js","mui/themes.js","components/Header/UserPanel/UserPanel.js","components/Header/Nav/Nav.js","components/Header/Header.js","components/Auth/AuthSelection/AuthSelection.js","components/Form/Form.js","components/Auth/AuthLogIn/AuthLogIn.js","components/Auth/AuthRegister/AuthRegister.js","components/Frame/Frame.js","components/MainMenu/MenuItem/MenuItem.js","features/task/taskSlice.js","components/MainMenu/MainMenu.js","constants.js","features/thunks/gameMiddleware.js","features/game/gameSlice.js","components/Modal/AddPictureModal/AddPictureModal.js","components/Panel/Panel.js","components/SetCard/SetCard.js","components/Modal/ChangePictureModal/ChangePictureModal.js","components/PictureCard/PictureCard.js","components/WordCard/WordCard.js","components/GameManager/GameManager.js","components/GameWrapper/GameWrapper.js","components/App/App.js","reportWebVitals.js","app/store.js","index.js","components/SetCard/SetCard.module.css","components/GameManager/GameManager.module.css","components/Header/Nav/Nav.module.css","components/Header/UserPanel/UserWindow/UserWindow.module.css","components/Auth/Auth.module.css","components/Modal/AddPictureModal/AddPictureModal.module.css","components/PictureCard/PictureCard.module.css","components/Modal/ChangePictureModal/ChangePictureModal.module.css"],"names":["module","exports","logout","createAsyncThunk","a","axios","post","then","response","data","authenticateUser","userData","user","getUser","catch","err","window","localStorage","setItem","JSON","stringify","get","pk","registerUser","authSlice","createSlice","name","initialState","status","authenticated","registerState","reducers","extraReducers","fulfilled","state","action","payload","rejected","pending","hasRefreshToken","UserWindow","username","useSelector","auth","dispatch","useDispatch","history","useHistory","Box","className","classes","userWrapper","Avatar","avatar","src","Typography","variant","component","capitalize","Link","onClick","push","location","reload","color","mainTheme","createMuiTheme","overrides","MuiOutlinedInput","input","padding","MuiInputLabel","outlined","transform","MuiFormControl","root","width","MuiButton","minWidth","MuiAvatar","height","textTransform","fontSize","MuiCardContent","palette","primary","light","main","dark","contrastText","secondary","green","augmentColor","red","orange","colors","Button","withStyles","theme","props","filter","col","backgroundColor","MiuButton","IconButton","UserPanel","isInAuth","test","currentRoute","pathname","isAuthenticated","to","Nav","NavList","NavList__item","Header","useLocation","AuthSelection","Paper","Frame","elevation","textWrapper","buttonWrapper","Form","form","FormContent","createForm","children","textInputs","allIds","map","id","type","label","ref","required","autoComplete","onChange","prefs","e","defaultChangeHandler","event","current","value","target","inputWrapper","TextField","customTextInput","byId","AuthLogIn","createRef","password","loginForm","login","submitHandler","preventDefault","resultAction","unwrapResult","onSubmit","AuthRegister","confirmPassword","email","registerForm","password1","password2","method","styles","MenuItem","getUsersSessions","userId","getDefaultSessions","taskSlice","sessions","sessionInstance","userSessionStatus","defaultSessionStatus","MainMenu","tasks","currentUser","useEffect","MainMenuFrame","session","idx","ItemWrapper","handleItemClick","sessionId","ChangeButton","ItemTypes","ITEM_STATUS","getData","sets","pictures","results","res","reduce","accumulator","currentValue","picturesOrder","element","setsIds","picturesIds","forEach","setId","repeatable","wordsOrder","completed","pictureId","picture","set","splice","pos","word","_","shuffle","Array","length","fill","correct","sessionStorage","sendData","deletedSets","delete","addedSets","max_size","owner","deletedPictures","changedPictures","put","addedPictures","console","log","gameSlice","dataStatus","currentSet","readGameState","placeWord","prevWord","position","initialWord","returnWord","switchSet","direction","completeSet","correctWords","item","redoSet","pictureAdded","newId","nanoid","owmer","pictureChanged","oldPicture","isNew","findIndex","pictureDeleted","pictureIdx","arrWord","picId","setAdded","setDeleted","setIdx","array","elem","selfArr","actions","setSecureStatus","AddPictureModal","useState","open","setOpen","srcField","setSrcField","wordField","setWordField","elementsQ","game","handleClose","disabled","Dialog","onClose","aria-labelledby","DialogTitle","DialogContent","windowPreview","draggable","imagePreview","alt","DialogContentText","textDialog","autoFocusz","margin","fullWidth","DialogActions","Panel","SetCard","attempts","controlsWrapperClasses","constructor","controlsWrapper__constructor","controlsWrapper","DndProvider","backend","HTML5Backend","setCard","picturesWrapper","wordsWrapper","words","submitButton","completeDisabled","completeState","completeHandler","redoWrapper","counter","redoButton","redoHandler","refreshButton","refreshHandler","applyHandler","deleteButtonWrapper","Tooltip","title","aria-label","deleteSetHandler","DeleteOutline","ApplyChangesButton","ChangePictureModal","style","PictureCard","isCorrect","useDrop","accept","drop","collect","monitor","isOver","Card","outline","background","CardContent","CardMedia","cardMedia","image","CardActionArea","actionArea","wordSpace","onDoubleClick","WordCard","useDrag","isDragging","drag","wordCard","visibility","GameManager","currentSetIdx","setsQ","wordsResult","GameWrapper","header","SetsCounter","SetsWrapper","Arrow__disabled","Arrow","wordResult","correctWord","hasSessionDataReceived","setHasSessionDataReceived","getItem","currentSessionId","match","getUsersList","parse","prepareSessionInstance","useCallback","usersList","getSessionInstance","sessionState","App","authCheckStatus","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","configureStore","reducer","authReducer","tasksReducer","gameReducer","ReactDOM","render","store","document","getElementById"],"mappings":"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","file":"static/js/main.7503d017.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"FormContent\":\"Form_FormContent__1If-B\",\"inputWrapper\":\"Form_inputWrapper__2y4SH\",\"Frame\":\"Form_Frame__3a9EN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ItemWrapper\":\"MainMenu_ItemWrapper__sdXuG\",\"MainMenuFrame\":\"MainMenu_MainMenuFrame__1pPJX\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"UserPanel\":\"UserPanel_UserPanel__3AUvx\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1s5Kb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Frame\":\"Frame_Frame__r3k2z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MenuItem\":\"MenuItem_MenuItem__7wp71\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Panel\":\"Panel_Panel__1TVDD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wordCard\":\"WordCard_wordCard__1hSBm\"};","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n  user: { pk: -1 },\r\n  status: \"idle\",\r\n  authenticated: true,\r\n  registerState: \"idle\",\r\n};\r\n\r\nexport const logout = createAsyncThunk(\"auth/logout\", async () => {\r\n  return await axios.post(`/dj-rest-auth/logout/`, {}).then((response) => {\r\n    return response.data;\r\n  });\r\n});\r\n\r\nexport const authenticateUser = createAsyncThunk(\r\n  \"auth/logIn\",\r\n  async (userData) => {\r\n    return await axios\r\n      .post(`/dj-rest-auth/login/`, userData)\r\n      .then((response) => response.data.user);\r\n  }\r\n);\r\n\r\nexport const getUser = createAsyncThunk(\"auth/chekLogin\", async () => {\r\n  try {\r\n    try {\r\n      await axios.post(`/dj-rest-auth/token/verify/`, {});\r\n    } catch {\r\n      await axios.post(`/dj-rest-auth/token/refresh/`, {}).catch((err) => {\r\n        throw err;\r\n      });\r\n    }\r\n  } catch (err) {\r\n    window.localStorage.setItem(`userId`, JSON.stringify(-1));\r\n    throw err;\r\n  }\r\n\r\n  const user = await axios.get(`/dj-rest-auth/user/`).then((response) => {\r\n    return response.data;\r\n  });\r\n\r\n  window.localStorage.setItem(`userId`, user.pk);\r\n\r\n  return user;\r\n});\r\n\r\nexport const registerUser = createAsyncThunk(\r\n  \"auth/registerUser\",\r\n  async (userData) => {\r\n    return await axios\r\n      .post(`/dj-rest-auth/registration/`, userData)\r\n      .then((response) => {\r\n        return response.data;\r\n      });\r\n  }\r\n);\r\n\r\nexport const authSlice = createSlice({\r\n  name: \"auth\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: {\r\n    [registerUser.fulfilled]: (state, action) => {\r\n      state.user = action.payload;\r\n      state.registerState = \"succeeded\";\r\n    },\r\n    [registerUser.rejected]: (state, action) => {\r\n      state.user = action.payload;\r\n      state.registerState = \"failed\";\r\n    },\r\n    [registerUser.pending]: (state, action) => {\r\n      state.user = action.payload;\r\n      state.registerState = \"loading\";\r\n    },\r\n    [logout.fulfilled]: (state) => {\r\n      state.authenticated = false;\r\n    },\r\n    [authenticateUser.fulfilled]: (state, action) => {\r\n      state.user = action.payload;\r\n      state.hasRefreshToken = true;\r\n    },\r\n    [getUser.fulfilled]: (state, action) => {\r\n      state.user = action.payload;\r\n      state.status = \"succeeded\";\r\n      state.authenticated = true;\r\n    },\r\n    [getUser.rejected]: (state) => {\r\n      state.status = \"failed\";\r\n      state.authenticated = false;\r\n    },\r\n    [getUser.pending]: (state) => {\r\n      state.status = \"loading\";\r\n    },\r\n  },\r\n});\r\n\r\nexport default authSlice.reducer;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { logout } from \"../../../../features/auth/authSlice\";\r\n\r\nimport classes from \"./UserWindow.module.css\";\r\nimport Link from \"@material-ui/core/Link\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport {capitalize} from \"@material-ui/core\";\r\n\r\nexport const UserWindow = () => {\r\n  const username = useSelector((state) => state.auth.user.username);\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <Box className={classes.userWrapper}>\r\n      <Avatar className={classes.avatar} src=\"\" ></Avatar>\r\n      <Typography className={classes.username} variant=\"h4\" component=\"h6\">\r\n        {!!username && capitalize(username)}\r\n      </Typography>\r\n      <Link\r\n        onClick={async () => {\r\n          await dispatch(logout());\r\n          history.push(\"/\");\r\n          window.location.reload();\r\n        }}\r\n        variant=\"body1\"\r\n        color=\"secondary\"\r\n        className={classes.logout}\r\n      >\r\n        logout\r\n      </Link>\r\n    </Box>\r\n  );\r\n};\r\n","import createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\r\nimport withStyles from \"@material-ui/core/styles/withStyles\";\r\nimport MiuButton from \"@material-ui/core/Button\";\r\n\r\nexport const mainTheme = createMuiTheme({\r\n\toverrides: {\r\n\t\tMuiOutlinedInput: {\r\n\t\t\tinput: {\r\n\t\t\t\tpadding: '0.5rem'\r\n\t\t\t},\r\n\t\t},\r\n\t\tMuiInputLabel:{\r\n\t\t\toutlined:{\r\n\t\t\t\ttransform: \"translate(14px, 10px) scale(1)\",\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiFormControl: {\r\n\t\t\troot: {\r\n\t\t\t\twidth: \"100%\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiButton: {\r\n\t\t\troot: {\r\n\t\t\t\tminWidth: \"25px\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiAvatar: {\r\n\t\t\troot: {\r\n\t\t\t\twidth: \"75px\",\r\n\t\t\t\theight: \"75px\",\r\n\t\t\t\ttextTransform: \"uppercase\",\r\n\t\t\t\tfontSize: \"2.5rem\"\r\n\t\t\t}\r\n\t\t},\r\n\t\tMuiCardContent: {\r\n\t\t\troot: {\r\n\t\t\t\tpadding: 0,\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tpalette: {\r\n\t\tprimary: {\r\n\t\t\tlight: '#757ce8',\r\n\t\t\tmain: '#3f50b5',\r\n\t\t\tdark: '#002884',\r\n\t\t\tcontrastText: '#fff',\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tlight: '#ff7961',\r\n\t\t\tmain: '#f44336',\r\n\t\t\tdark: '#ba000d',\r\n\t\t\tcontrastText: '#fff',\r\n\t\t},\r\n\t}\r\n});\r\n\r\nmainTheme.palette.green = mainTheme.palette.augmentColor({\r\n\tmain: '#51c68e',\r\n\tcontrastText: '#ffffff',\r\n});\r\n\r\nmainTheme.palette.red = mainTheme.palette.augmentColor({\r\n\tmain: '#f60000',\r\n\tcontrastText: '#ffffff',\r\n});\r\n\r\nmainTheme.palette.orange = mainTheme.palette.augmentColor({\r\n\tmain: '#ffab40',\r\n\tcontrastText: '#ffffff',\r\n});\r\n\r\nconst colors = ['primary', 'secondary', 'green', 'red', 'orange']\r\n\r\nexport const Button = withStyles(theme => ({\r\n\troot: props => {\r\n\t\tconst color = colors.filter(col => props.color === col)\r\n\t\tif (!!color && props.variant === \"contained\") {\r\n\t\t\treturn {\r\n\t\t\t\tcolor: mainTheme.palette[color].contrastText,\r\n\t\t\t\tbackgroundColor: mainTheme.palette[color].main,\r\n\t\t\t\t\"&:hover\": {\r\n\t\t\t\t\tbackgroundColor: mainTheme.palette[color].dark,\r\n\t\t\t\t\t// Reset on touch devices, it doesn't add specificity\r\n\t\t\t\t\t\"@media (hover: none)\": {\r\n\t\t\t\t\t\tbackgroundColor: mainTheme.palette[color].main\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn {}\r\n\t\t}\r\n\t}\r\n}))(MiuButton);\r\n\r\nexport const IconButton = withStyles(theme => ({\r\n\troot: {\r\n\t\tpadding: \"2.5px\",\r\n\t}\r\n}))(Button);","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { UserWindow } from \"./UserWindow/UserWindow\";\r\n\r\nimport classes from \"./UserPanel.module.css\";\r\nimport { Button } from \"../../../mui/themes\";\r\n\r\nexport const UserPanel = (props) => {\r\n  const isInAuth = /\\/auth/.test(props.currentRoute.pathname);\r\n  const isAuthenticated = useSelector((state) => state.auth.authenticated);\r\n\r\n  return (\r\n    <div className={classes.UserPanel}>\r\n      {!isInAuth && !isAuthenticated && (\r\n        <NavLink to={\"/auth\"}>\r\n          <Button variant=\"contained\" color=\"green\">\r\n            log in\r\n          </Button>\r\n        </NavLink>\r\n      )}\r\n      {isAuthenticated && <UserWindow />}\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport classes from './Nav.module.css'\r\n\r\nexport const Nav = () => {\r\n\r\n\treturn (\r\n\t\t<nav className={classes.Nav}>\r\n\t\t\t<ul className={classes.NavList}>\r\n\t\t\t\t<NavLink className={classes.NavList__item} to={\"/\"}><li>home</li></NavLink>\r\n\t\t\t\t<li className={classes.NavList__item}>something</li>\r\n\t\t\t\t<li className={classes.NavList__item}>something1</li>\r\n\t\t\t</ul>\r\n\t\t</nav>\r\n\t)\r\n}","import React from \"react\";\r\nimport { useLocation } from \"react-router-dom\"\r\n\r\nimport { UserPanel } from \"./UserPanel/UserPanel\";\r\nimport { Nav } from \"./Nav/Nav\";\r\n\r\nimport classes from \"./Header.module.css\"\r\n\r\nexport const Header = () => {\r\n\tconst currentRoute = useLocation();\r\n\r\n\treturn (\r\n\t\t\t<div className={classes.Header}>\r\n\t\t\t\t<Nav/>\r\n\t\t\t\t<UserPanel currentRoute={currentRoute} />\r\n\t\t\t</div>\r\n\t\t)\r\n}","import React from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nimport classes from \"../Auth.module.css\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport { Button } from \"../../../mui/themes\";\r\n\r\nexport const AuthSelection = () => {\r\n  return (\r\n    <Paper className={classes.Frame} elevation={3}>\r\n      <div className={classes.textWrapper}>\r\n        <p>Войдите в систему или зарегистрируйтесь:</p>\r\n      </div>\r\n      <div>\r\n        <NavLink className={classes.buttonWrapper} to=\"/auth/login\">\r\n          <Button variant=\"contained\" color=\"green\">\r\n            Log In\r\n          </Button>\r\n        </NavLink>\r\n        <NavLink className={classes.buttonWrapper} to=\"/auth/register\">\r\n          <Button variant=\"contained\" color=\"secondary\">\r\n            Register\r\n          </Button>\r\n        </NavLink>\r\n      </div>\r\n    </Paper>\r\n  );\r\n};","import React from \"react\";\r\nimport { Paper } from \"@material-ui/core\";\r\nimport classes from \"./Form.module.css\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nexport const Form = (props) => {\r\n  const { form } = props;\r\n\r\n  return (\r\n    <Paper className={classes.Frame} elevation={3}>\r\n      <div className={classes.FormContent}>\r\n        {createForm(form)}\r\n        {props.children}\r\n      </div>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst createForm = (textInputs) => {\r\n  return textInputs.allIds.map((id) => customTextInput(textInputs.byId[id]));\r\n};\r\n\r\nfunction customTextInput({\r\n  id,\r\n  type = \"text\",\r\n  variant = \"outlined\",\r\n  label = \"id\",\r\n  ref,\r\n  required = false,\r\n  autoComplete = \"of\",\r\n  onChange,\r\n}) {\r\n  const prefs = {\r\n    id: id,\r\n    type: type,\r\n    variant: variant,\r\n    label: label,\r\n    ref: ref,\r\n    required: required,\r\n    autoComplete: autoComplete,\r\n    onChange: (e) => defaultChangeHandler(ref, e),\r\n  };\r\n\r\n  function defaultChangeHandler(ref, event) {\r\n    !!onChange && onChange();\r\n\r\n    ref.current.value = event.target.value;\r\n  }\r\n\r\n  return (\r\n    <div key={id} className={classes.inputWrapper}>\r\n      <TextField {...prefs} />\r\n    </div>\r\n  );\r\n}","import React, { createRef } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nimport { authenticateUser, getUser } from \"../../../features/auth/authSlice\";\r\n\r\nimport { Form } from \"../../Form/Form\";\r\nimport { Button } from \"../../../mui/themes\";\r\n\r\n\r\nexport const AuthLogIn = () => {\r\n  const dispatch = useDispatch();\r\n  const username = createRef();\r\n  const password = createRef();\r\n  const history = useHistory();\r\n\r\n  const loginForm = {\r\n    byId: {\r\n      login: {\r\n        id: \"login\",\r\n        ref: username,\r\n        label: \"login\",\r\n        required: true,\r\n      },\r\n      password: {\r\n        id: \"password\",\r\n        type: \"password\",\r\n        ref: password,\r\n        label: \"password\",\r\n        required: true,\r\n      },\r\n    },\r\n    allIds: [\"login\", \"password\"],\r\n  };\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const resultAction = await dispatch(\r\n        authenticateUser({\r\n          username: username.current.value,\r\n          password: password.current.value,\r\n        })\r\n      );\r\n      unwrapResult(resultAction);\r\n      history.push(\"/\");\r\n      dispatch(getUser());\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={submitHandler}>\r\n      <Form form={loginForm}>\r\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n          Login\r\n        </Button>\r\n      </Form>\r\n    </form>\r\n  );\r\n};","import React, { createRef } from \"react\";\r\nimport { unwrapResult } from \"@reduxjs/toolkit\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport { registerUser } from \"../../../features/auth/authSlice\";\r\n\r\nimport { Form } from \"../../Form/Form\";\r\nimport { Button } from \"../../../mui/themes\";\r\n\r\nexport const AuthRegister = () => {\r\n  let history = useHistory();\r\n  const username = createRef();\r\n  const password = createRef();\r\n  const confirmPassword = createRef();\r\n  const email = createRef();\r\n  const dispatch = useDispatch();\r\n\r\n  const registerForm = {\r\n    byId: {\r\n      login: {\r\n        id: \"login\",\r\n        ref: username,\r\n        label: \"login\",\r\n        required: true,\r\n      },\r\n      password: {\r\n        id: \"password\",\r\n        type: \"password\",\r\n        ref: password,\r\n        label: \"password\",\r\n        required: true,\r\n      },\r\n      \"password-confirm\": {\r\n        id: \"password-confirm\",\r\n        type: \"password\",\r\n        ref: confirmPassword,\r\n        label: \"confirm password\",\r\n        required: true,\r\n      },\r\n      \"e-mail\": {\r\n        id: \"email\",\r\n        type: \"email\",\r\n        ref: email,\r\n        label: \"e-mail\",\r\n        required: true,\r\n      },\r\n    },\r\n    allIds: [\"login\", \"e-mail\", \"password\", \"password-confirm\"],\r\n  };\r\n\r\n  const submitHandler = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const resultAction = await dispatch(\r\n        registerUser({\r\n          username: username.current.value,\r\n          password1: password.current.value,\r\n          password2: confirmPassword.current.value,\r\n          email: email.current.value,\r\n        })\r\n      );\r\n      unwrapResult(resultAction);\r\n      history.push(\"/\");\r\n    } catch (err) {\r\n      password.current.value = \"\";\r\n      confirmPassword.current.value = \"\";\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form\r\n      method=\"post\"\r\n      name=\"register\"\r\n      onSubmit={(e) => submitHandler(e)}\r\n    >\r\n      <Form form={registerForm}>\r\n        <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n          Register\r\n        </Button>\r\n      </Form>\r\n    </form>\r\n  );\r\n};","import React from 'react';\r\n\r\nimport classes from './Frame.module.css'\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nexport const Frame = (props) => {\r\n\treturn (\r\n\t\t<Paper variant={\"outlined\"} className={`${classes.Frame} ${props.styles}`}>\r\n\t\t\t{props.children}\r\n\t\t</Paper>\r\n\t)\r\n}","import React from 'react';\r\n\r\nimport { Frame } from \"../../Frame/Frame\";\r\n\r\nimport classes from \"./MenuItem.module.css\";\r\n\r\nexport const MenuItem = (props) => {\r\n\r\n\treturn (\r\n\t\t<Frame styles={classes.MenuItem}>\r\n\t\t\t{props.children}\r\n\t\t</Frame>\r\n\t)\r\n}","import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst initialState = {\r\n  sessions: [],\r\n  sessionInstance: {},\r\n  userSessionStatus: \"idle\",\r\n  defaultSessionStatus: \"idle\",\r\n};\r\n\r\nexport const getUsersSessions = createAsyncThunk(\r\n  \"task/getUsersSessions\",\r\n  async (userId) => {\r\n    return await axios\r\n      .get(`/api/sessions/owner/${userId}/`)\r\n      .then((response) => {\r\n        return response.data;\r\n      });\r\n  }\r\n);\r\n\r\nexport const getDefaultSessions = createAsyncThunk(\r\n  \"task/getDefaultSessions\",\r\n  async () => {\r\n    return await axios.get(`/api/sessions/no-owner/`).then((response) => {\r\n      return response.data;\r\n    });\r\n  }\r\n);\r\n\r\nexport const taskSlice = createSlice({\r\n  name: \"tasks\",\r\n  initialState,\r\n  reducers: {},\r\n  extraReducers: {\r\n    [getUsersSessions.fulfilled]: (state, action) => {\r\n      state.sessions.push(...action.payload);\r\n      state.userSessionStatus = \"succeeded\";\r\n    },\r\n    [getUsersSessions.rejected]: (state) => {\r\n      state.userSessionStatus = \"failed\";\r\n    },\r\n    [getUsersSessions.pending]: (state) => {\r\n      state.userSessionStatus = \"loading\";\r\n    },\r\n    [getDefaultSessions.fulfilled]: (state, action) => {\r\n      state.sessions.push(...action.payload);\r\n      state.defaultSessionStatus = \"succeeded\";\r\n    },\r\n    [getDefaultSessions.rejected]: (state) => {\r\n      state.defaultSessionStatus = \"failed\";\r\n    },\r\n    [getDefaultSessions.pending]: (state) => {\r\n      state.defaultSessionStatus = \"loading\";\r\n    },\r\n  },\r\n});\r\n\r\nexport default taskSlice.reducer","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport CreateOutlinedIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport { MenuItem } from \"./MenuItem/MenuItem\";\r\nimport {\r\n  getUsersSessions,\r\n  getDefaultSessions,\r\n} from \"../../features/task/taskSlice\";\r\n\r\nimport classes from \"./MainMenu.module.css\";\r\nimport { Button } from \"../../mui/themes\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nexport const MainMenu = () => {\r\n  const dispatch = useDispatch();\r\n  const { userSessionStatus, defaultSessionStatus } = useSelector(\r\n    (state) => state.tasks\r\n  );\r\n  const sessions = useSelector((state) => state.tasks.sessions);\r\n  const currentUser = useSelector((state) => state.auth.user.pk);\r\n  const isAuthenticated = currentUser !== -1;\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    defaultSessionStatus === \"idle\" && dispatch(getDefaultSessions());\r\n    isAuthenticated && userSessionStatus === \"idle\" &&\r\n    dispatch(getUsersSessions(currentUser));\r\n  }, [currentUser]);\r\n\r\n  const handleItemClick = (session) => {\r\n    history.push(`/game/${session.id}`);\r\n  };\r\n\r\n  return (\r\n    <Paper className={classes.MainMenuFrame} elevation={3}>\r\n      {sessions.map((session, idx) => {\r\n        return (\r\n          <div key={`menuItem${idx}`} className={classes.ItemWrapper}>\r\n            <button onClick={() => handleItemClick(session)}>\r\n              <MenuItem>\r\n                <span>{session.name}</span>\r\n              </MenuItem>\r\n            </button>\r\n            {isAuthenticated && <ChangeButton sessionId={session.id} />}\r\n          </div>\r\n        );\r\n      })}\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst ChangeButton = (props) => {\r\n  const history = useHistory();\r\n  const handleItemChangeClick = (sessionId) => {\r\n    history.push(`game-constructor/${sessionId}`);\r\n  };\r\n\r\n  return (\r\n    <Button\r\n      variant=\"contained\"\r\n      color=\"orange\"\r\n      onClick={() => handleItemChangeClick(props.sessionId)}\r\n    >\r\n      <CreateOutlinedIcon />\r\n    </Button>\r\n  );\r\n};\r\n","export const ItemTypes = {\r\n\tWORD: \"word\",\r\n}\r\n\r\nexport const ITEM_STATUS = {\r\n\tADDED: \"ADDED\",\r\n\tDELETED: \"DELETED\",\r\n\tCHANGED: \"CHANGED\",\r\n\tINITIAL: \"INITIAL\"\r\n}","import { createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport _ from \"lodash\";\r\nimport { ITEM_STATUS } from \"../../constants\";\r\n\r\nexport const getData = createAsyncThunk(\r\n\t\"game/getData\",\r\n\tasync ({ sessionId, sessionInstance }) => {\r\n\t\tconst state = {\r\n\t\t\tsession: sessionId,\r\n\t\t\tsets: null,\r\n\t\t\tpictures: null,\r\n\t\t\tresults: {},\r\n\t\t};\r\n\r\n\t\tconst sets = await axios\r\n\t\t\t.get(`/api/session-id/${sessionId}/sets/`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tlet res = [...response.data];\r\n\t\t\t\treturn (state.sets = {\r\n\t\t\t\t\tbyId: res.reduce((accumulator, currentValue) => {\r\n\t\t\t\t\t\tcurrentValue.picturesOrder = [];\r\n\t\t\t\t\t\taccumulator[currentValue.id] = currentValue;\r\n\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t}, {}),\r\n\t\t\t\t\tallIds: res.map((element) => element.id),\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tconst pictures = await axios\r\n\t\t\t.get(`/api/session-id/${sessionId}/pictures/`)\r\n\t\t\t.then((response) => {\r\n\t\t\t\tlet res = [...response.data];\r\n\t\t\t\treturn (state.pictures = {\r\n\t\t\t\t\tbyId: res.reduce((accumulator, currentValue) => {\r\n\t\t\t\t\t\taccumulator[currentValue.id] = currentValue;\r\n\t\t\t\t\t\treturn accumulator;\r\n\t\t\t\t\t}, {}),\r\n\t\t\t\t\tallIds: res.map((element) => element.id),\r\n\t\t\t\t});\r\n\t\t\t});\r\n\r\n\t\tconst setsIds = sets.allIds;\r\n\t\tconst picturesIds = pictures.allIds;\r\n\r\n\r\n\t\tsetsIds.forEach((setId) => {\r\n\t\t\tsets.byId[setId] = {\r\n\t\t\t\tid: sets.byId[setId].id,\r\n\t\t\t\tname: sets.byId[setId].name,\r\n\t\t\t\trepeatable: sets.byId[setId].repeatable,\r\n\t\t\t\tpicturesOrder: [],\r\n\t\t\t\twordsOrder: [],\r\n\t\t\t\tcompleted: false,\r\n\t\t\t\tstatus: ITEM_STATUS.INITIAL,\r\n\t\t\t};\r\n\t\t});\r\n\r\n\t\tpicturesIds.forEach((pictureId) => {\r\n\t\t\tconst picture = pictures.byId[pictureId];\r\n\t\t\tconst set = sets.byId[picture.set];\r\n\t\t\tpicture.status = ITEM_STATUS.INITIAL;\r\n\r\n\t\t\tset.picturesOrder.splice(picture.pos - 1, 1, pictureId);\r\n\r\n\t\t\tset.wordsOrder.push(picture.word);\r\n\t\t});\r\n\r\n\t\tsetsIds.forEach((setId) => {\r\n\t\t\tconst set = sets.byId[setId]\r\n\r\n\t\t\tset.wordsOrder = _.shuffle(set.wordsOrder);\r\n\r\n\t\t\tstate.results[setId] = Array(set.picturesOrder.length).fill({\r\n\t\t\t\tword: null,\r\n\t\t\t\tcorrect: null,\r\n\t\t\t});\r\n\t\t});\r\n\r\n\t\tsessionInstance && window.sessionStorage.setItem(sessionInstance, JSON.stringify(state));\r\n\r\n\t\treturn state;\r\n\t}\r\n);\r\n\r\n\r\nexport const sendData = createAsyncThunk(\r\n\t\"game/sendData\",\r\n\tasync ({state, userId}) => {\r\n\r\n\t\tfor (const setId of state.deletedSets) {\r\n\t\t\tawait axios.delete(`/api/set/${setId}/`);\r\n\t\t}\r\n\r\n\t\tfor (const setId of state.addedSets) {\r\n\t\t\tconst set = {\r\n\t\t\t\tname: setId,\r\n\t\t\t\tmax_size: 8,\r\n\t\t\t\tsession: state.session,\r\n\t\t\t\ttheme: 1,\r\n\t\t\t\towner: userId,\r\n\t\t\t\trepeatable: 3,\r\n\t\t\t};\r\n\r\n\t\t\tawait axios.post(`/api/sets/`, set);\r\n\t\t}\r\n\r\n\t\tfor (const pictureId of state.deletedPictures) {\r\n\t\t\tawait axios.delete(`/api/picture/${pictureId}/`)\r\n\t\t}\r\n\r\n\t\tfor (const pictureId of state.changedPictures) {\r\n\t\t\tconst picture = {\r\n\t\t\t\t...state.pictures.byId[pictureId]\r\n\t\t\t}\r\n\r\n\t\t\tdelete picture.id;\r\n\t\t\tdelete picture.status;\r\n\r\n\t\t\tawait axios.put(`/api/picture/${pictureId}/`, picture)\r\n\t\t}\r\n\r\n\t\tfor (const pictureId of state.addedPictures) {\r\n\t\t\tconst picture = {\r\n\t\t\t\t...state.pictures.byId[pictureId]\r\n\t\t\t}\r\n\r\n\t\t\tdelete picture.id;\r\n\t\t\tdelete picture.status;\r\n\r\n\t\t\tconsole.log(picture)\r\n\t\t\tawait axios.post(`/api/pictures/`, picture)\r\n\t\t}\r\n\r\n\t\treturn state;\r\n\t}\r\n)","import { createSlice } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\nimport _ from \"lodash\";\r\nimport { getData, sendData } from \"../thunks/gameMiddleware\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { ITEM_STATUS } from \"../../constants\";\r\n\r\nconst initialState = {\r\n  session: null,\r\n  sets: {\r\n    byId: {},\r\n    allIds: [],\r\n  },\r\n  pictures: {\r\n    byId: {},\r\n    allIds: [],\r\n  },\r\n  dataStatus: \"idle\",\r\n  results: {\r\n    setId: [],\r\n  },\r\n  currentSet: 0,\r\n  addedSets: [],\r\n  deletedSets: [],\r\n  addedPictures: [],\r\n  changedPictures: [],\r\n  deletedPictures: [],\r\n};\r\n\r\nexport const gameSlice = createSlice({\r\n  name: \"game\",\r\n  initialState,\r\n  reducers: {\r\n    readGameState(state, action) {\r\n      state = {\r\n        ...state,\r\n        ...action.payload,\r\n      };\r\n      return state;\r\n    },\r\n    placeWord(state, action) {\r\n      const { setId, word, prevWord, position } = action.payload;\r\n\r\n      state.results[setId][position].word = word;\r\n      state.sets.byId[setId].wordsOrder = state.sets.byId[\r\n        setId\r\n      ].wordsOrder.filter((initialWord) => initialWord !== word);\r\n      prevWord && state.sets.byId[setId].wordsOrder.push(prevWord);\r\n\r\n      return state;\r\n    },\r\n    returnWord(state, action) {\r\n      const { setId, position, word } = action.payload;\r\n\r\n      state.results[setId][position].word = null;\r\n      word && state.sets.byId[setId].wordsOrder.push(word);\r\n\r\n      return state;\r\n    },\r\n    switchSet(state, action) {\r\n      const { direction, length } = action.payload;\r\n      let currentSet = state.currentSet;\r\n\r\n      switch (direction) {\r\n        case \"left\": {\r\n          currentSet > 0 && --state.currentSet;\r\n          break;\r\n        }\r\n        case \"right\": {\r\n          currentSet < length + 1 && ++state.currentSet;\r\n          break;\r\n        }\r\n        default: {\r\n          break;\r\n        }\r\n      }\r\n\r\n      return state;\r\n    },\r\n    completeSet(state, action) {\r\n      const { setId, correctWords } = action.payload;\r\n\r\n      state.results[setId].forEach(\r\n        (item, idx) => (item.correct = item.word === correctWords[idx])\r\n      );\r\n      state.sets.byId[setId].completed = true;\r\n\r\n      return state;\r\n    },\r\n    redoSet(state, action) {\r\n      const setId = action.payload.setId;\r\n\r\n      state.results[setId].forEach((item) => {\r\n        item.word && state.sets.byId[setId].wordsOrder.push(item.word);\r\n        item.correct = null;\r\n        item.word = null;\r\n      });\r\n\r\n      state.sets.byId[setId].completed = false;\r\n      state.sets.byId[setId].wordsOrder = _.shuffle(\r\n        state.sets.byId[setId].wordsOrder\r\n      );\r\n      --state.sets.byId[setId].repeatable;\r\n\r\n      return state;\r\n    },\r\n    pictureAdded(state, action) {\r\n      const { setId, src, word, owner } = action.payload;\r\n\r\n      let newId = nanoid(5);\r\n      state.pictures.byId[newId] = {\r\n        id: newId,\r\n        src: src,\r\n        word: word,\r\n        set: setId,\r\n        owmer: owner,\r\n        theme: 1,\r\n        pos: state.sets.byId[setId].picturesOrder.length + 1,\r\n        status: ITEM_STATUS.ADDED,\r\n      };\r\n      state.pictures.allIds.push(newId);\r\n      state.sets.byId[setId].picturesOrder.push(newId);\r\n      state.results[setId].push({ word: word, correct: true });\r\n      state.addedPictures.push(newId);\r\n\r\n      return state;\r\n    },\r\n    pictureChanged(state, action) {\r\n      const { id, setId, src, word, owner } = action.payload;\r\n      const oldPicture = state.pictures.byId[id];\r\n\r\n      let isNew = !(oldPicture.word == word && oldPicture.src == src);\r\n\r\n      state.pictures.byId[id] = {\r\n        ...state.pictures.byId[id],\r\n        src: src,\r\n        word: word,\r\n      };\r\n\r\n      if (state.pictures.byId[id].status === ITEM_STATUS.INITIAL && isNew) {\r\n        state.changedPictures.push(id);\r\n        state.pictures.byId[id].status = ITEM_STATUS.CHANGED;\r\n      }\r\n\r\n      state.sets.byId[setId].wordsOrder = state.sets.byId[\r\n        setId\r\n      ].wordsOrder.filter((word) => oldPicture.word !== word);\r\n\r\n      state.results[setId][\r\n        state.sets.byId[setId].picturesOrder.findIndex((e) => e === id)\r\n      ] = { word: isNew ? word : null, correct: true };\r\n\r\n      return state;\r\n    },\r\n    pictureDeleted(state, action) {\r\n      const { id } = action.payload;\r\n      const { set: setId, word } = state.pictures.byId[id];\r\n      const { picturesOrder, wordsOrder } = state.sets.byId[setId];\r\n      const pictureIdx = picturesOrder.findIndex(\r\n        (pictureId) => pictureId === id\r\n      );\r\n      const status = state.pictures.byId[id].status;\r\n\r\n      picturesOrder.splice(pictureIdx, 1);\r\n      state.sets.byId[setId].wordsOrder = wordsOrder.filter(\r\n        (arrWord) => arrWord !== word\r\n      );\r\n\r\n      delete state.pictures.byId[id];\r\n      state.pictures.allIds = state.pictures.allIds.filter(\r\n        (pictureId) => pictureId !== id\r\n      );\r\n      state.results[setId].splice(pictureIdx, 1);\r\n\r\n      if (\r\n        status === ITEM_STATUS.INITIAL ||\r\n        status === ITEM_STATUS.CHANGED\r\n      ) {\r\n        state.deletedPictures.push(id);\r\n      }\r\n      if (status === ITEM_STATUS.ADDED) {\r\n        state.addedPictures = state.addedPictures.filter(\r\n          (picId) => picId !== id\r\n        );\r\n      }\r\n\r\n      return state;\r\n    },\r\n    setAdded(state) {\r\n      const MAX_SET_Q = 15;\r\n      if (state.sets.allIds.length >= MAX_SET_Q) {\r\n        return;\r\n      }\r\n\r\n      const newId = nanoid(5);\r\n      state.sets.allIds.push(newId);\r\n      state.sets.byId[newId] = {\r\n        id: newId,\r\n        name: newId,\r\n        repeatable: 1,\r\n        picturesOrder: [],\r\n        wordsOrder: [],\r\n        completed: false,\r\n        status: ITEM_STATUS.ADDED\r\n      };\r\n      state.results[newId] = [];\r\n      state.addedSets.push(newId);\r\n\r\n      return state;\r\n    },\r\n    setDeleted(state, action) {\r\n      const { id } = action.payload;\r\n      const status = state.sets.byId[id].status;\r\n      const setIdx = state.sets.allIds.findIndex(setId => setId === id)\r\n\r\n      if (state.sets.allIds.length == 1) {\r\n        return;\r\n      }\r\n\r\n      state.sets.allIds = state.sets.allIds.filter(setId => setId !== id);\r\n      delete state.sets.byId[id];\r\n\r\n      if(status === ITEM_STATUS.ADDED) {\r\n        state.addedSets = state.addedSets.filter(setId => setId !== id);\r\n      }\r\n      if(status === ITEM_STATUS.INITIAL) {\r\n        state.deletedSets.push(id);\r\n      }\r\n\r\n      if(state.currentSet >= setIdx) {\r\n        --state.currentSet\r\n      }\r\n\r\n      [state.addedPictures, state.deletedPictures, state.changedPictures].forEach(array => array.forEach((elem, idx, selfArr) => {\r\n        state.pictures.byId[elem].set === id && selfArr.splice(idx, 1);\r\n      }))\r\n\r\n      return state;\r\n    },\r\n  },\r\n  extraReducers: {\r\n    [getData.fulfilled]: (state, action) => {\r\n      state.dataStatus = \"succeeded\";\r\n      state.session = action.payload.session;\r\n      state.sets = action.payload.sets;\r\n      state.pictures = action.payload.pictures;\r\n      state.results = action.payload.results;\r\n\r\n      state.currentSet = 0;\r\n      state.addedSets = [];\r\n      state.deletedSets = [];\r\n      state.addedPictures = [];\r\n      state.changedPictures = [];\r\n      state.deletedPictures = [];\r\n\r\n      return state;\r\n    },\r\n    [sendData.fulfilled]: (state) => {\r\n      return state;\r\n    }\r\n  },\r\n});\r\n\r\nexport const {\r\n  readGameState,\r\n  placeWord,\r\n  returnWord,\r\n  switchSet,\r\n  completeSet,\r\n  redoSet,\r\n  setSecureStatus,\r\n  pictureAdded,\r\n  pictureChanged,\r\n  pictureDeleted,\r\n  setAdded,\r\n  setDeleted\r\n} = gameSlice.actions;\r\nexport default gameSlice.reducer;\r\n","import React, { useState } from \"react\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport classes from \"./AddPictureModal.module.css\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { pictureAdded } from \"../../../features/game/gameSlice\";\r\nimport { IconButton } from \"../../../mui/themes\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nexport default function AddPictureModal(props) {\r\n  const [open, setOpen] = useState(false);\r\n  const [srcField, setSrcField] = useState();\r\n  const [wordField, setWordField] = useState();\r\n  const dispatch = useDispatch();\r\n  const userId = useSelector((state) => state.auth.user.pk);\r\n  const elementsQ = useSelector(state => state.game.sets.byId[props.setId].picturesOrder.length)\r\n  const creationDisabled = () => elementsQ === 12;\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n    setSrcField(null);\r\n    setWordField(null);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    dispatch(\r\n      pictureAdded({\r\n        setId: props.setId,\r\n        src: srcField,\r\n        word: wordField,\r\n        owner: userId,\r\n      })\r\n    );\r\n\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Box className={classes.buttonWrapper}>\r\n        <IconButton\r\n          variant=\"contained\"\r\n          color=\"orange\"\r\n          onClick={handleClickOpen}\r\n          disabled={creationDisabled()}\r\n        >\r\n          <AddIcon />\r\n        </IconButton>\r\n      </Box>\r\n      <Dialog\r\n        open={open}\r\n        onClose={handleClose}\r\n        aria-labelledby=\"form-dialog-title\"\r\n      >\r\n        <DialogTitle id=\"form-dialog-title\">Add picture</DialogTitle>\r\n        <DialogContent>\r\n          <div className={classes.windowPreview}>\r\n            <img\r\n              draggable={false}\r\n              className={classes.imagePreview}\r\n              src={!!srcField ? srcField : \"https://i.imgur.com/JWsWdpo.png\"}\r\n              alt=\"img\"\r\n            />\r\n          </div>\r\n          <DialogContentText className={classes.textDialog}>\r\n            To add picture fill the fields downside\r\n          </DialogContentText>\r\n          <TextField\r\n            autoFocusz\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            id=\"imgSrc\"\r\n            label=\"Img src\"\r\n            fullWidth\r\n            onChange={(e) => setSrcField(e.target.value)}\r\n            value={srcField}\r\n          />\r\n          <TextField\r\n            margin=\"dense\"\r\n            variant=\"outlined\"\r\n            id=\"wordText\"\r\n            label=\"Word\"\r\n            fullWidth\r\n            onChange={(e) => setWordField(e.target.value)}\r\n            value={wordField}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            Cancel\r\n          </Button>\r\n          <Button onClick={handleSubmit} color=\"primary\">\r\n            Add\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}","import React from \"react\";\r\n\r\nimport { Frame } from \"../Frame/Frame\";\r\n\r\nimport classes from \"./Panel.module.css\";\r\n\r\nexport const Panel = (props) => {\r\n  return (\r\n    <Frame styles={`${classes.Panel} ${props.styles}`}>{props.children}</Frame>\r\n  );\r\n};","import React from \"react\";\r\nimport { DndProvider } from \"react-dnd\";\r\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\r\n\r\nimport AddPictureModal from \"../Modal/AddPictureModal/AddPictureModal\";\r\nimport { Frame } from \"../Frame/Frame\";\r\nimport { Panel } from \"../Panel/Panel\";\r\n\r\nimport classes from \"./SetCard.module.css\";\r\nimport { Button, IconButton } from \"../../mui/themes\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport { Typography } from \"@material-ui/core\";\r\nimport { DeleteOutline } from \"@material-ui/icons\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\n\r\nexport const SetCard = (props) => {\r\n  const attempts = props.repeatable;\r\n  const controlsWrapperClasses = props.constructor\r\n    ? classes.controlsWrapper__constructor\r\n    : classes.controlsWrapper;\r\n\r\n  return (\r\n    <DndProvider backend={HTML5Backend}>\r\n      <Frame styles={classes.setCard}>\r\n        <Panel styles={classes.picturesWrapper}>\r\n          {props.pictures}\r\n          {props.constructor && <AddPictureModal setId={props.setId} />}\r\n        </Panel>\r\n        <Panel styles={classes.wordsWrapper}>{props.words}</Panel>\r\n        <Box className={controlsWrapperClasses}>\r\n          <Button\r\n            className={classes.submitButton}\r\n            disabled={props.completeDisabled || props.completeState}\r\n            onClick={props.completeHandler}\r\n            variant=\"contained\"\r\n            color=\"green\"\r\n          >\r\n            Complete\r\n          </Button>\r\n          <Box className={classes.redoWrapper}>\r\n            <Typography component={\"span\"} className={classes.counter}>\r\n              Attempts: <b>{attempts}</b>\r\n            </Typography>\r\n            <Button\r\n              className={classes.redoButton}\r\n              disabled={!(attempts !== 0 && props.completeState)}\r\n              onClick={props.redoHandler}\r\n              variant=\"contained\"\r\n              color=\"orange\"\r\n            >\r\n              Redo\r\n            </Button>\r\n          </Box>\r\n          <Button\r\n            className={classes.refreshButton}\r\n            onClick={props.refreshHandler}\r\n            variant=\"contained\"\r\n            color=\"orange\"\r\n          >\r\n            Refresh\r\n          </Button>\r\n          {props.constructor && <ApplyChangesButton applyHandler={props.applyHandler}/>}\r\n        </Box>\r\n        {props.constructor && <Box className={classes.deleteButtonWrapper}>\r\n          <Tooltip title=\"Delete set\" aria-label=\"add\">\r\n            <IconButton onClick={() => props.deleteSetHandler(props.setId)} variant=\"contained\" color=\"red\">\r\n              <DeleteOutline />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </Box>}\r\n      </Frame>\r\n    </DndProvider>\r\n  );\r\n};\r\n\r\nconst ApplyChangesButton = ({applyHandler}) => {\r\n  return (\r\n    <div className={classes.buttonWrapper}>\r\n      <Button variant=\"contained\" color=\"green\" onClick={applyHandler}>\r\n        APPLY CHANGES\r\n      </Button>\r\n    </div>\r\n  );\r\n};","import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { MuiThemeProvider } from \"@material-ui/core\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogActions from \"@material-ui/core/DialogActions\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\r\nimport CreateOutlinedIcon from \"@material-ui/icons/CreateOutlined\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport { Button, mainTheme, IconButton } from \"../../../mui/themes\";\r\nimport classes from \"./ChangePictureModal.module.css\";\r\nimport {\r\n  pictureChanged,\r\n  pictureDeleted,\r\n} from \"../../../features/game/gameSlice\";\r\n\r\nexport default function ChangePictureModal(props) {\r\n  const dispatch = useDispatch();\r\n  const [open, setOpen] = useState(false);\r\n  const { src, word } = useSelector(\r\n    (state) => state.game.pictures.byId[props.pictureId]\r\n  );\r\n  const userId = useSelector((state) => state.auth.user.pk);\r\n  const [srcField, setSrcField] = useState(src);\r\n  const [wordField, setWordField] = useState(word);\r\n\r\n  const handleClickOpen = () => {\r\n    setOpen(true);\r\n    setSrcField(src);\r\n    setWordField(word);\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const handleSubmit = () => {\r\n    dispatch(\r\n      pictureChanged({\r\n        id: props.pictureId,\r\n        setId: props.setId,\r\n        src: srcField,\r\n        word: wordField,\r\n        owner: userId,\r\n      })\r\n    );\r\n\r\n    handleClose();\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    dispatch(\r\n      pictureDeleted({\r\n        id: props.pictureId,\r\n      })\r\n    );\r\n\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <MuiThemeProvider theme={mainTheme}>\r\n      <Box>\r\n        <Box className={classes.buttonWrapper}>\r\n          <IconButton\r\n            variant=\"contained\"\r\n            color=\"orange\"\r\n            onClick={handleClickOpen}\r\n          >\r\n            <CreateOutlinedIcon />\r\n          </IconButton>\r\n        </Box>\r\n        <Dialog\r\n          open={open}\r\n          onClose={handleClose}\r\n          aria-labelledby=\"form-dialog-title\"\r\n        >\r\n          <DialogTitle id=\"form-dialog-title\">\r\n            Changing picture <b>\"{word}\"</b>\r\n          </DialogTitle>\r\n          <DialogContent>\r\n            <div className={classes.windowPreview}>\r\n              <img\r\n                draggable={false}\r\n                className={classes.imagePreview}\r\n                src={srcField}\r\n                alt=\"img\"\r\n              />\r\n            </div>\r\n            <DialogContentText className={classes.textDialog}>\r\n              To add picture fill the fields downside\r\n            </DialogContentText>\r\n            <TextField\r\n              autoFocusz\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              id=\"imgSrc\"\r\n              label=\"Img src\"\r\n              fullWidth\r\n              value={srcField}\r\n              onChange={(e) => setSrcField(e.target.value)}\r\n            />\r\n            <TextField\r\n              margin=\"dense\"\r\n              variant=\"outlined\"\r\n              id=\"wordText\"\r\n              label=\"Word\"\r\n              value={wordField}\r\n              fullWidth\r\n              onChange={(e) => setWordField(e.target.value)}\r\n            />\r\n          </DialogContent>\r\n          <DialogActions>\r\n            <Button\r\n              onClick={handleDelete}\r\n              color=\"secondary\"\r\n              style={{ margin: \"0 auto 0 0\" }}\r\n            >\r\n              Delete\r\n            </Button>\r\n            <Button onClick={handleClose} color=\"primary\">\r\n              Cancel\r\n            </Button>\r\n            <Button onClick={handleSubmit} color=\"primary\">\r\n              Change\r\n            </Button>\r\n          </DialogActions>\r\n        </Dialog>\r\n      </Box>\r\n    </MuiThemeProvider>\r\n  );\r\n}","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useDrop } from \"react-dnd\";\r\n\r\nimport { ItemTypes, ITEM_STATUS } from \"../../constants\";\r\nimport { placeWord, returnWord } from \"../../features/game/gameSlice\";\r\n\r\nimport classes from \"./PictureCard.module.css\";\r\nimport ChangePictureModal from \"../Modal/ChangePictureModal/ChangePictureModal\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport { CardActionArea, CardContent, Typography } from \"@material-ui/core\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport CardMedia from \"@material-ui/core/CardMedia\";\r\n\r\nexport const PictureCard = (props) => {\r\n  const dispatch = useDispatch();\r\n  const isCorrect = props.isCorrect;\r\n  const status = useSelector(\r\n    (state) => state.game.pictures.byId[props.pictureId].status\r\n  );\r\n\r\n  const [{ isOver }, drop] = useDrop({\r\n    accept: ItemTypes.WORD,\r\n    drop: (item) => {\r\n      dispatch(\r\n        placeWord({\r\n          word: item.word,\r\n          position: props.position,\r\n          setId: props.setId,\r\n          prevWord: props.word,\r\n        })\r\n      );\r\n    },\r\n    collect: (monitor) => ({ isOver: !!monitor.isOver() }),\r\n  });\r\n\r\n  return (\r\n    <Card\r\n      className={classes.PictureCard}\r\n      style={{\r\n        outline:\r\n          props.completed && `2px solid ${isCorrect ? \"#73ee65\" : \"#f53831\"}`,\r\n        background: status === ITEM_STATUS.INITIAL ? \"white\" : \"#d9fdaf\",\r\n      }}\r\n      elevation={3}\r\n    >\r\n      <CardContent>\r\n        {props.constructor && (\r\n          <ChangePictureModal pictureId={props.pictureId} setId={props.setId} />\r\n        )}\r\n        {/*<img src={props.src} alt=\"\" />*/}\r\n        <CardMedia className={classes.cardMedia} image={props.src} />\r\n      </CardContent>\r\n      <CardActionArea className={classes.actionArea}>\r\n        <Box\r\n          ref={drop}\r\n          style={\r\n            isOver\r\n              ? {\r\n                  background:\r\n                    status === ITEM_STATUS.INITIAL\r\n                      ? \"rgb(129,215,241, 0.5)\"\r\n                      : \"#ffffff\",\r\n                }\r\n              : {\r\n                  background:\r\n                    status === ITEM_STATUS.INITIAL ? \"white\" : \"#f5f5f5\",\r\n                }\r\n          }\r\n          className={classes.wordSpace}\r\n          onDoubleClick={() => {\r\n            !props.completed &&\r\n              dispatch(\r\n                returnWord({\r\n                  word: props.word,\r\n                  position: props.position,\r\n                  setId: props.setId,\r\n                })\r\n              );\r\n          }}\r\n          title=\"Нажмите два раза для того, чтобы удалить слово\"\r\n        >\r\n          <Typography variant=\"body2\" component=\"span\">{props.word}</Typography>\r\n        </Box>\r\n      </CardActionArea>\r\n    </Card>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useDrag } from \"react-dnd\";\r\n\r\nimport { ItemTypes } from \"../../constants\";\r\n\r\nimport classes from \"./WordCard.module.css\";\r\nimport { CardContent, Typography } from \"@material-ui/core\";\r\nimport Card from \"@material-ui/core/Card\";\r\n\r\nexport const WordCard = (props) => {\r\n  const [{ isDragging }, drag] = useDrag({\r\n    item: { type: ItemTypes.WORD, word: props.word },\r\n    collect: (monitor) => ({\r\n      isDragging: !!monitor.isDragging(),\r\n    }),\r\n  });\r\n\r\n  return (\r\n    <Card\r\n      id={props.id}\r\n      className={classes.wordCard}\r\n      elevation={3}\r\n      ref={drag}\r\n      style={{\r\n        visibility: isDragging ? \"hidden\" : \"visible\",\r\n      }}\r\n    >\r\n      <CardContent>\r\n        <Typography variant=\"body2\" component=\"span\">{props.word}</Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { SetCard } from \"../SetCard/SetCard\";\r\nimport { PictureCard } from \"../PictureCard/PictureCard\";\r\nimport { WordCard } from \"../WordCard/WordCard\";\r\nimport {\r\n  switchSet,\r\n  completeSet,\r\n  redoSet,\r\n  setAdded, setDeleted,\r\n} from \"../../features/game/gameSlice\";\r\n\r\nimport classes from \"./GameManager.module.css\";\r\nimport { Button } from \"../../mui/themes\";\r\nimport {sendData} from \"../../features/thunks/gameMiddleware\";\r\n\r\nexport const GameManager = (props) => {\r\n  const dispatch = useDispatch();\r\n  const userId = useSelector((state) => state.auth.user.pk)\r\n  const currentSetIdx = useSelector((state) => state.game.currentSet);\r\n  const setId = useSelector(\r\n    (state) => state.game.sets.allIds[state.game.currentSet]\r\n  );\r\n  const game = useSelector((state) => state.game);\r\n  const setsQ = game.sets.allIds.length;\r\n  const { wordsOrder, picturesOrder, completed, repeatable } = game.sets.byId[\r\n    setId\r\n  ];\r\n  const completeDisabled = !(wordsOrder.length === 0);\r\n  const wordsResult = useSelector((state) => state.game.results[setId]);\r\n  const correctWords = picturesOrder.map(\r\n    (pictureId) => game.pictures.byId[pictureId].word\r\n  );\r\n\r\n  const addSetHandler = () => {\r\n    dispatch(setAdded());\r\n  };\r\n\r\n  const deleteSetHandler = (setId) => {\r\n    dispatch(setDeleted({id:setId}));\r\n  }\r\n\r\n  function applyHandler() {\r\n    dispatch(\r\n      sendData({state:game, userId})\r\n    )\r\n  }\r\n\r\n  function redoHandler() {\r\n    dispatch(\r\n      redoSet({\r\n        setId: setId,\r\n      })\r\n    );\r\n  }\r\n\r\n  function completeHandler() {\r\n    dispatch(\r\n      completeSet({\r\n        setId: setId,\r\n        correctWords: correctWords,\r\n      })\r\n    );\r\n  }\r\n\r\n  function getWords() {\r\n    return wordsOrder.map((word, idx) => {\r\n      return <WordCard word={word} key={`picture${idx}`} id={`word${idx}`} />;\r\n    });\r\n  }\r\n\r\n  function getPictures() {\r\n    return picturesOrder.map((pictureId, idx) => {\r\n      const { src, word } = game.pictures.byId[pictureId];\r\n      const { word: wordResult, correct } = wordsResult[idx];\r\n\r\n      return (\r\n        <PictureCard\r\n          key={`picture${idx}`}\r\n          id={`picture${idx}`}\r\n          src={src}\r\n          word={wordResult}\r\n          position={idx}\r\n          setId={setId}\r\n          completed={completed}\r\n          correctWord={word}\r\n          isCorrect={correct}\r\n          constructor={props.constructor}\r\n          pictureId={pictureId}\r\n        />\r\n      );\r\n    });\r\n  }\r\n\r\n  return (\r\n    <div className={classes.GameWrapper}>\r\n      <div className={classes.header}>\r\n        <span className={classes.SetsCounter}>\r\n          Set <b>{currentSetIdx + 1}</b> / {setsQ}\r\n        </span>\r\n        {props.constructor && (\r\n          <Button variant=\"contained\" color=\"orange\" onClick={addSetHandler}>\r\n            create new set\r\n          </Button>\r\n        )}\r\n      </div>\r\n      <div className={classes.SetsWrapper}>\r\n        <button\r\n          className={`${\r\n            currentSetIdx === 0 ? classes.Arrow__disabled : classes.Arrow\r\n          }`}\r\n          onClick={() => {\r\n            dispatch(switchSet({ direction: \"left\", length: setsQ }));\r\n          }}\r\n          disabled={currentSetIdx === 0}\r\n        >\r\n          &#xE76B;\r\n        </button>\r\n        <SetCard\r\n          pictures={getPictures()}\r\n          words={getWords()}\r\n          completeDisabled={completeDisabled}\r\n          completeHandler={completeHandler}\r\n          redoHandler={redoHandler}\r\n          deleteSetHandler={deleteSetHandler}\r\n          applyHandler={applyHandler}\r\n          completeState={completed}\r\n          repeatable={repeatable}\r\n          refreshHandler={props.refreshHandler}\r\n          constructor={props.constructor}\r\n          setId={setId}\r\n        />\r\n        <button\r\n          className={`${\r\n            currentSetIdx === setsQ - 1 ? classes.Arrow__disabled : classes.Arrow\r\n          }`}\r\n          onClick={() => {\r\n            dispatch(switchSet({ direction: \"right\", length: setsQ }));\r\n          }}\r\n          disabled={currentSetIdx === setsQ - 1}\r\n        >\r\n          &#xE76C;\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useCallback, useEffect, useState } from \"react\";\r\nimport { GameManager } from \"../GameManager/GameManager\";\r\nimport { readGameState } from \"../../features/game/gameSlice\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { nanoid } from \"nanoid\";\r\nimport { getData } from \"../../features/thunks/gameMiddleware\";\r\n\r\nexport const GameWrapper = (props) => {\r\n  const dispatch = useDispatch();\r\n  const [hasSessionDataReceived, setHasSessionDataReceived] = useState(false);\r\n  const userId = window.localStorage.getItem(\"userId\");\r\n  const game = useSelector((state) => state.game);\r\n  const dataStatus = useSelector((state) => state.game.dataStatus);\r\n  const currentSessionId = window.location.pathname.match(/\\d+$/)[0];\r\n\r\n  function getUsersList() {\r\n    return JSON.parse(window.sessionStorage.getItem(\"users\"));\r\n  }\r\n\r\n  function refreshHandler() {\r\n    return dispatch(\r\n      getData({\r\n        sessionId: currentSessionId,\r\n        sessionInstance: getSessionInstance(userId, currentSessionId),\r\n        userId: userId,\r\n      })\r\n    );\r\n  }\r\n\r\n  let prepareSessionInstance = useCallback(\r\n    (userId, currentSessionId) => {\r\n      let usersList = getUsersList();\r\n\r\n      function fetchSessionData() {\r\n        dispatch(\r\n          getData({\r\n            sessionId: currentSessionId,\r\n            sessionInstance: usersList[userId][currentSessionId],\r\n          })\r\n        );\r\n      }\r\n\r\n      if (!usersList || !usersList[userId]) {\r\n        usersList = !usersList ? {} : usersList;\r\n        usersList[userId] = { [currentSessionId]: nanoid(5) };\r\n      } else if (!usersList[userId][currentSessionId]) {\r\n        usersList[userId][currentSessionId] = nanoid(5);\r\n      }\r\n\r\n      fetchSessionData();\r\n      setHasSessionDataReceived(false);\r\n      window.sessionStorage.setItem(\"users\", JSON.stringify(usersList));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  let getSessionInstance = useCallback(\r\n    (userId, currentSessionId) => {\r\n      let usersList = getUsersList();\r\n      if (\r\n        !usersList ||\r\n        !usersList[userId] ||\r\n        !usersList[userId][currentSessionId]\r\n      ) {\r\n        prepareSessionInstance(userId, currentSessionId);\r\n        usersList = getUsersList();\r\n      }\r\n\r\n      return usersList[userId][currentSessionId];\r\n    },\r\n    [prepareSessionInstance]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (props.constructor && dataStatus === \"idle\") {\r\n      dispatch(\r\n        getData({\r\n          sessionId: currentSessionId,\r\n        })\r\n      );\r\n      dataStatus === \"succeeded\" && setHasSessionDataReceived(true);\r\n    }\r\n    else if (props.constructor && dataStatus === \"succeeded\") {\r\n      setHasSessionDataReceived(true);\r\n    }\r\n\r\n    if (!props.constructor) {\r\n      let sessionInstance = getSessionInstance(userId, currentSessionId);\r\n      const sessionState = JSON.parse(\r\n        window.sessionStorage.getItem(sessionInstance)\r\n      );\r\n\r\n      if (!hasSessionDataReceived && sessionState) {\r\n        setHasSessionDataReceived(true);\r\n        dispatch(readGameState(sessionState));\r\n      } else if (!hasSessionDataReceived && game.dataStatus === \"idle\") {\r\n        prepareSessionInstance(userId, currentSessionId);\r\n      } else {\r\n        window.sessionStorage.setItem(sessionInstance, JSON.stringify(game));\r\n      }\r\n    }\r\n  }, [\r\n    currentSessionId,\r\n    dataStatus,\r\n    dispatch,\r\n    game,\r\n    getSessionInstance,\r\n    hasSessionDataReceived,\r\n    prepareSessionInstance,\r\n    userId,\r\n    props.constructor,\r\n  ]);\r\n\r\n  return hasSessionDataReceived ? (\r\n    <div>\r\n      <GameManager\r\n        constructor={props.constructor}\r\n        refreshHandler={refreshHandler}\r\n      />\r\n    </div>\r\n  ) : (\r\n    <div>{hasSessionDataReceived}</div>\r\n  );\r\n};","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect,\r\n} from \"react-router-dom\";\r\n\r\nimport { Header } from \"../Header/Header\";\r\nimport { AuthSelection } from \"../Auth/AuthSelection/AuthSelection\";\r\nimport { AuthLogIn } from \"../Auth/AuthLogIn/AuthLogIn\";\r\nimport { AuthRegister } from \"../Auth/AuthRegister/AuthRegister\";\r\nimport { getUser } from \"../../features/auth/authSlice\";\r\nimport { MainMenu } from \"../MainMenu/MainMenu\";\r\nimport { GameWrapper } from \"../GameWrapper/GameWrapper\";\r\n\r\nimport \"./App.css\";\r\nimport { MuiThemeProvider } from \"@material-ui/core\";\r\nimport { mainTheme } from \"../../mui/themes\";\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n  const authCheckStatus = useSelector((state) => state.auth.status);\r\n  const isAuthenticated = useSelector((state) => state.auth.authenticated);\r\n\r\n  useEffect(() => {\r\n    authCheckStatus === \"idle\" && dispatch(getUser());\r\n  });\r\n\r\n  return (\r\n    <MuiThemeProvider theme={mainTheme}>\r\n      <Router>\r\n        <div className=\"App\">\r\n          <Header authCheckStatus={authCheckStatus} />\r\n          <main className=\"contentWrapper\">\r\n            <Switch>\r\n              <Route exact path=\"/\">\r\n                <MainMenu />\r\n              </Route>\r\n              <Route exact path=\"/auth\">\r\n                {!isAuthenticated ? <AuthSelection /> : <Redirect to={`/`} />}\r\n              </Route>\r\n              <Route path=\"/auth/login\">\r\n                {!isAuthenticated ? <AuthLogIn /> : <Redirect to={`/`} />}\r\n              </Route>\r\n              <Route path=\"/auth/register\">\r\n                {!isAuthenticated ? <AuthRegister /> : <Redirect to={`/`} />}\r\n              </Route>\r\n              <Route path=\"/game\">\r\n                <GameWrapper constructor={false} />\r\n              </Route>\r\n              <Route path=\"/game-constructor\">\r\n                {isAuthenticated ? (\r\n                  <GameWrapper constructor={true} />\r\n                ) : (\r\n                  <Redirect to={`/`} />\r\n                )}\r\n              </Route>\r\n            </Switch>\r\n          </main>\r\n          <footer></footer>\r\n        </div>\r\n      </Router>\r\n    </MuiThemeProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import { configureStore } from '@reduxjs/toolkit'\r\n\r\nimport authReducer from '../features/auth/authSlice'\r\nimport tasksReducer from \"../features/task/taskSlice\";\r\nimport gameReducer from \"../features/game/gameSlice\";\r\n\r\nexport default configureStore({\r\n\treducer: {\r\n\t\tauth: authReducer,\r\n\t\ttasks: tasksReducer,\r\n\t\tgame: gameReducer,\r\n\t}\r\n})\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport { Provider } from \"react-redux\";\r\nimport store from './app/store.js';\r\nimport './normalize.css'\r\n\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"setCard\":\"SetCard_setCard__6mPLe\",\"picturesWrapper\":\"SetCard_picturesWrapper__1enz5\",\"wordsWrapper\":\"SetCard_wordsWrapper__3GJ-O\",\"controlsWrapper\":\"SetCard_controlsWrapper__vugsC\",\"controlsWrapper__constructor\":\"SetCard_controlsWrapper__constructor__2A87p\",\"submitButton\":\"SetCard_submitButton__3AuAG\",\"redoWrapper\":\"SetCard_redoWrapper__ifuKV\",\"counter\":\"SetCard_counter__3c5Cf\",\"redoButton\":\"SetCard_redoButton__3D_49\",\"refreshButton\":\"SetCard_refreshButton__1v1Bp\",\"buttonWrapper\":\"SetCard_buttonWrapper__3wLGG\",\"deleteButtonWrapper\":\"SetCard_deleteButtonWrapper__f9ehn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"GameManager_header__1OhCf\",\"GameWrapper\":\"GameManager_GameWrapper__18aoo\",\"Arrow\":\"GameManager_Arrow__3a74E\",\"Arrow__disabled\":\"GameManager_Arrow__disabled__13EAi\",\"SetsWrapper\":\"GameManager_SetsWrapper__2Z_37\",\"SetsCounter\":\"GameManager_SetsCounter__q20g-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Nav\":\"Nav_Nav__2oBMH\",\"NavList\":\"Nav_NavList__2gWlD\",\"NavList__item\":\"Nav_NavList__item__UesAu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"userWrapper\":\"UserWindow_userWrapper__CcQvf\",\"avatar\":\"UserWindow_avatar__1PvOM\",\"username\":\"UserWindow_username__3RpOZ\",\"logout\":\"UserWindow_logout__2YcaB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Frame\":\"Auth_Frame__3ZJFn\",\"FormContent\":\"Auth_FormContent__2Uno6\",\"inputWrapper\":\"Auth_inputWrapper__2jVCk\",\"buttonWrapper\":\"Auth_buttonWrapper__2Dnvi\",\"textWrapper\":\"Auth_textWrapper__4bgnZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textDialog\":\"AddPictureModal_textDialog__2lRqc\",\"buttonWrapper\":\"AddPictureModal_buttonWrapper__3Wt4G\",\"windowPreview\":\"AddPictureModal_windowPreview__2ya1V\",\"imagePreview\":\"AddPictureModal_imagePreview__2BUd8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"PictureCard\":\"PictureCard_PictureCard__1r432\",\"cardMedia\":\"PictureCard_cardMedia__4Vfb0\",\"actionArea\":\"PictureCard_actionArea__22FGW\",\"wordSpace\":\"PictureCard_wordSpace__39vbE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"textDialog\":\"ChangePictureModal_textDialog__2scB4\",\"windowPreview\":\"ChangePictureModal_windowPreview__2YuuO\",\"imagePreview\":\"ChangePictureModal_imagePreview__2JE-S\",\"buttonWrapper\":\"ChangePictureModal_buttonWrapper__1UgJD\"};"],"sourceRoot":""}